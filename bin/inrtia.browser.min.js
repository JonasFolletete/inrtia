!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Inrtia=e()}(this,function(){"use strict";var t=function(t,e,i){return t-(t-e)/i.friction},e=function(t,e,i,s,n,o){n&&this._resetSpeed(o);var r=this._getSpeed(o);return r+=(-(t-e)/(i.friction/100)+-i.rigidity*r)/i.mass*s,this._setSpeed(r,o),t+r*s},i=function(t,i,s,n,o,r){var a=e.call(this,t,i,s,n,o,r);return a-i>=0?(this._setSpeed(-this._getSpeed(r),r),i):a},s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}();return function(){function r(t){var e=t.value,i=t.interpolation,o=void 0===i?"linear":i,a=t.precisionStop,u=void 0===a?.001:a,h=t.perfectStop,l=void 0!==h&&h,p=t.rigidity,c=void 0===p?.1:p,f=t.friction,d=void 0===f?10:f,v=t.mass,y=void 0===v?.01:v;if(n(this,r),this.value=e,this.stopped=!0,this.complex="object"===(void 0===e?"undefined":s(e)),this.complex)if(this.keys=Object.keys(this.value),Array.isArray(e))this.targetValue=e.slice(0);else{this.targetValue={};for(var m=this.keys.length;m--;)this.targetValue[this.keys[m]]=this.value[this.keys[m]]}else this.targetValue=e;this.precisionStop=u,this.perfectStop=l,this.interpolationFn=this.getInterpolation(o),this.interpolationParams={rigidity:c,friction:d,mass:y}}return o(r,[{key:"getInterpolation",value:function(s){switch(s){case"elastic":return e;case"bounce":return i;default:return t}}},{key:"to",value:function(t){if(this.complex)for(var e=void 0,i=this.keys.length;i--;)t[e=this.keys[i]]&&(this.targetValue[e]=t[e]);else this.targetValue=t;this.stopped&&this._start()}},{key:"_start",value:function(){this.reset=!0,this.stopped=!1,this.lastTime=Date.now()-17}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.stopped)return this.value;var e=Date.now(),i=(t||e-this.lastTime)/1e3,s=!0;if(this.complex)for(var n=void 0,o=this.keys.length;o--;)n=this.keys[o],this.value[n]=this._updateValue(this.value[n],this.targetValue[n],i,n),s=s&&this._needStop(this.value[n],this.targetValue[n],n);else this.value=this._updateValue(this.value,this.targetValue,i,!1),s=this._needStop(this.value,this.targetValue,!1);return this.reset&&(this.reset=!1),s&&(this.perfectStop&&(this.value=this.targetValue),this.stop()),this.lastTime=e,this.value}},{key:"_updateValue",value:function(t,e,i,s){return this.interpolationFn.call(this,t,e,this.interpolationParams,i,this.reset,s)}},{key:"_needStop",value:function(t,e,i){var s=t-e,n=this._getSpeed(i);return Math.abs(s)<this.precisionStop&&(!!isNaN(n)||Math.abs(n)<this.precisionStop)}},{key:"_setSpeed",value:function(t,e){this.complex?this.speed[e]=t:this.speed=t}},{key:"_getSpeed",value:function(t){return this.complex?this.speed&&this.speed[t]:this.speed}},{key:"_resetSpeed",value:function(t){this.complex?(this.speed||(this.speed={}),this.speed[t]=0):this.speed=0}},{key:"stop",value:function(){this.stopped=!0}},{key:"destroy",value:function(){this.stop(),this.interpolationFn=null,this.interpolationParams=null}}]),r}()});