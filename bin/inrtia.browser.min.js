!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Inrtia=e()}(this,function(){"use strict";function e(t,e,i){return t-(t-e)/i.friction}function r(t,e,i,s,o,n){o&&this._resetSpeed(n);var a=this._getSpeed(n);return a+=(-(t-e)/(i.friction/100)+-i.rigidity*a)/i.mass*s,this._setSpeed(a,n),t+a*s}function i(t,e,i,s,o,n){var a=r.call(this,t,e,i,s,o,n);return 0<=a-e?(this._setSpeed(-this._getSpeed(n),n),e):a}var v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function y(t){var e=t.value,i=t.interpolation,s=void 0===i?"basic":i,o=t.precisionStop,n=void 0===o?.001:o,a=t.perfectStop,r=void 0!==a&&a,h=t.rigidity,u=void 0===h?.1:h,l=t.friction,p=void 0===l?10:l,c=t.mass,f=void 0===c?.01:c;if(!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y),this.value=e,this.stopped=!0,this.complex="object"===(void 0===e?"undefined":v(e)),this.complex)if(this.keys=Object.keys(this.value),Array.isArray(e))this.targetValue=e.slice(0);else{this.targetValue={};for(var d=this.keys.length;d--;)this.targetValue[this.keys[d]]=this.value[this.keys[d]]}else this.targetValue=e;this.precisionStop=n,this.perfectStop=r,this.interpolationFn=s instanceof Function?s:this.getInterpolation(s),this.interpolationParams={rigidity:u,friction:p,mass:f}}return function(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),t}(y,[{key:"getInterpolation",value:function(t){switch(t){case"elastic":return r;case"bounce":return i;default:return e}}},{key:"to",value:function(t){if(this.complex)for(var e=void 0,i=this.keys.length;i--;)!t[e=this.keys[i]]&&0!==t[e]||(this.targetValue[e]=t[e]);else this.targetValue=t;this.stopped&&this._start()}},{key:"_start",value:function(){this.reset=!0,this.stopped=!1,this.lastTime=Date.now()-17}},{key:"update",value:function(t){var e=0<arguments.length&&void 0!==t&&t;if(this.stopped)return this.value;var i=Date.now(),s=(e||i-this.lastTime)/1e3,o=!0;if(this.complex)for(var n=void 0,a=this.keys.length;a--;)n=this.keys[a],this.value[n]=this._updateValue(this.value[n],this.targetValue[n],s,n),o=o&&this._needStop(this.value[n],this.targetValue[n],n);else this.value=this._updateValue(this.value,this.targetValue,s,!1),o=this._needStop(this.value,this.targetValue,!1);if(this.reset&&(this.reset=!1),o){if(this.perfectStop)if(this.complex)for(var r=void 0,h=this.keys.length;h--;)r=this.keys[h],this.value[r]=this.targetValue[r];else this.value=this.targetValue;this.stop()}return this.lastTime=i,this.value}},{key:"_updateValue",value:function(t,e,i,s){return this.interpolationFn.call(this,t,e,this.interpolationParams,i,this.reset,s)}},{key:"_needStop",value:function(t,e,i){var s=t-e,o=this._getSpeed(i);return Math.abs(s)<this.precisionStop&&(!!isNaN(o)||Math.abs(o)<this.precisionStop)}},{key:"_setSpeed",value:function(t,e){this.complex?this.speed[e]=t:this.speed=t}},{key:"_getSpeed",value:function(t){return this.complex?this.speed&&this.speed[t]:this.speed}},{key:"_resetSpeed",value:function(t){this.complex?(this.speed||(this.speed={}),this.speed[t]=0):this.speed=0}},{key:"stop",value:function(){this.stopped=!0}},{key:"destroy",value:function(){this.stop(),this.interpolationFn=null,this.interpolationParams=null}}]),y});